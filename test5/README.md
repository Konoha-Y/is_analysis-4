# 实验5：图书管理系统数据库设计与界面设计
|学号|班级|姓名|照片|
|:-------:|:-------------: | :----------:|:---:|
|201510414318|软件(本)15-3|吴江涛|![](./wjt.jpg)|

## 1.数据库表设计

## 1.1. 图书表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|ISBN|varchar2(10)|主键，外键|否|图书编码|||
|author|varchar2(10)| |否|作者|||
|pubTime|datetime(20)| |否|出版时间|||
|publisher|varchar2(20)| |否|出版社|||


## 1.2. 馆藏资源表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|name|varchar2(10)|主键，外键|否|书名|||
|pubCode|int(11)| |否|出版编号|||
|price|double(10)| |否|价格|||
|introduction|varchar2(100)| |是|图书介绍|||
|amount|int(10)| |否|数量|||

## 1.3. 借阅者信息表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|user_name|varchar2(10)|主键|否|用户名|||
|sex|varchar2(10)| |否|性别|||
|phoneNum|int(10)| |否|电话号码|||
|cardNum|int(10)|外键 |否|借书证号|||
|Id_card|int(20)| |否|身份证号|||
|book_quota|int(10)| |否|借书限额|||
|credit_points|int(10)| |否|信用积分|||


## 1.4. 借阅记录表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|CardNum|int(10)|主键，外键|否|借书证号|||
|ISBN|int(20)| |否|图书编号|||
|Borrow_time|datetime(20)| |否|借书时间|||

## 1.5. 系统管理员信息表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|System_name|varchar2(10)|主键|否|系统管理员姓名|||
|Staff_num|int(20)| 外键|否|职工号|||


## 1.6. 图书管理员信息表
|字段|类型|主键，外键|可以为空|说明|约束|默认值|
|:-------:|:-------------:|:------:|:----:|:---:|:----:|:-----|
|BookManager_name|varchar2(10)|主键|否|图书管理员姓名|||
|Staff_num|int(20)| 外键|否|职工号|||
***

## 2. 界面设计
## 2.1. 还书界面设计
![return_book](return_book.png)
- 用例图参见：还书用例
- 类图参见：还书类，读者类
- 顺序图参见：还书顺序图
- API接口如下：

1. 获取还书分类分类

- 功能：用于还书分类分类
- 请求地址： http://api.wjt.com/v1/api/return_book
- 请求方法：POST
- 请求参数：

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|bookname|是|用于检测和匹配相应信息。 |
|ISBN|是|用于查询到相对应的书本信息。|
|Publisher|是|用于缩小范围精确匹配。|
|access_token|是|用于验证请求合法性的认证信息。 |
|method|是|固定为 “GET”。|

- 返回实例：
```
{
    "info": "还书成功",
    "data": {
        "bookname": "计算机科学与技术",
        "Publisher": "成大出版社",
        "ISBN": "985-2155-110",
        "return_time": "2018年5月20日  15：32：01",
        "return_deadline": "2018年5月30日  17：00：00",
        "borrow_time": "2018年4月20日  15：00：00",
    },
    "code": 200
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|Info|返回信息|
|data|返回参数数据主体|
|dodo|返回码|

## 2.2. 添加图书界面设计
![add_book](add_book.png)
- 用例图参见：添加图书用例
- 类图参见：添加图书类，图书管理员类
- 顺序图参见：添加图书顺序图

- API接口如下：

1. 获取添加图书分类分类

- 功能：用于添加图书分类分类
- 请求地址： http://api.wjt.com/v1/api/add_book
- 请求方法：POST
- 请求参数：

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|bookname|是|用于检测和匹配相应信息。 |
|ISBN|是|用于查询到相对应的书本信息。|
|access_token|是|用于验证请求合法性的认证信息。 |
|method|是|固定为 “GET”。|

- 返回实例：
```
{
    "info": "添加成功",
    "data": {
        "bookname": "计算机科学与技术",
        "Price": "25.00",
        "Category": "计算机类",
        "Publisher": "成大出版社",
        "ISBN": "985-2155-110",
        "publish_time": "2011年5月20日",
    },
    "code": 200
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|Info|返回信息|
|data|返回参数数据主体|
|200|返回码|


## 2.3. 添加用户界面设计
![add_user](add_user.png)
- 用例图参见：添加用户用例
- 类图参见：添加用户类，图书管理员类
- 顺序图参见：添加用户顺序图


- API接口如下：

1. 获取添加图书分类分类

- 功能：用于添加图书分类分类
- 请求地址： http://api.wjt.com/v1/api/add_user
- 请求方法：POST
- 请求参数：

|参数名称|必填|说明|
|:-------:|:-------------: | :----------:|
|access_token|是|用于验证请求合法性的认证信息。 |
|method|是|固定为 “GET”。|

- 返回实例：
```
{
    "info": "添加成功",
    "data": {
        "username": "吴江涛",
        "password": "*******",
        "sex": "男",
        "college": "信息科学与工程学院",
        "photo": "图片",
    },
    "code": 200
}
```
- 返回参数说明：
    
|参数名称|说明|
|:-------:|:-------------: |
|Info|返回信息|
|data|返回参数数据主体|
|200|返回码|